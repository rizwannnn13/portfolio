<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debian 11</title>

    <link rel="stylesheet" href="/assets/css/dhcp.css">
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="header">
                <div class="judul">
                    <h1>Installasi</h1>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="navigation">
                <h1>Dokumentasi</h1>
            </div>
        </div>
        <div class="row">
            <div class="sidebar">
                <h1>Debian 10</h1>
                <ul>
                    <li><a href="/blog/debian/index-debian.html">Home Debian</a></li>
                    <li><a href="/blog/debian/dhcp.html">Superlab-DHCP Server</a></li>
                    <li><a href="/blog/debian/ssh.html">Superlab-SSH</a></li>
                    <li><a href="/blog/debian/dns.html">Superlab-DNS Server</a></li>
                    <li><a href="/blog/debian/ftp.html">Superlab-FTP Server</a></li>
                    <li><a href="/blog/debian/apache.html">Superlab-Web Server</a></li>
                    <li><a href="/blog/debian/wordpress.html">Superlab-Wordpress</a></li>
                    <li><a href="/blog/debian/phpmyadmin.html">Superlab-PhpMyAdmin</a></li>
                </ul>
                <h1>Mikrotik</h1>
                <ul>
                    <li><a href="/blog/mikrotik/index-mikrotik.html">Home Mikrotik</a></li>
                    <li><a href="/blog/mikrotik/basic.html">Basic Config</a></li>
                    <li><a href="/blog/mikrotik/vlan.html">VLAN</a></li>
                    <li><a href="/blog/mikrotik/static.html">Routing Static</a></li>
                    <li><a href="/blog/mikrotik/dynamic.html">Routing Dynamic</a></li>
                    <li><a href="/blog/mikrotik/hotspot.html">Hotspot Login</a></li>
                    <li><a href="/blog/mikrotik/blok.html">Blok SSH, Telnet, HTTP</a></li>
                    <li><a href="/blog/mikrotik/bandwidth.html">Bandwidth</a></li>
                    <li><a href="/blog/mikrotik/load-balancing.html">Load Balanding</a></li>
                    <li><a href="/blog/mikrotik/bridge.html">Bridge</a></li>
                </ul>
                <h1>AWS Cloud</h1>
                <ul>
                    <li><a href="/blog/aws/index-cloud.html">Home Cloud</a></li>
                    <li><a href="/blog/aws/cpanel.html">Install cPanel</a></li>
                    <li><a href="/blog/aws/aws-wordpress.html">Install Wordpress</a></li>
                    <li><a href="/blog/aws/nginx.html">Install NginX</a></li>
                    <li><a href="/blog/aws/zabbix.html">Install Zabbix & Database</a></li>
                </ul>
                <h1>Security</h1>
                <ul>
                    <li><a href="/blog/security/index-security.html">Home Security</a></li>
                    <li><a href="/blog/security/install.html">Installasi</a></li>
                    <li><a href="/blog/security/iptables.html">IP Tables</a></li>
                    <li><a href="/blog/security/cracklib.html">Craklib</a></li>
                    <li><a href="/blog/security/port.html">Port Forwarding</a></li>
                    <li><a href="/blog/security/hack.html">MITM&DDOS</a></li>
                    <li><a href="/blog/security/snort.html">Snort</a></li>
                    <li><a href="/blog/security/otp.html">Generated OTP</a></li>
                </ul>
                <h1>Debian 11</h1>
                <ul>
                    <li><a href="/blog/deb11/index-deb11.html">Home Debian11</a></li>
                    <li><a href="/blog/deb11/install.html">Install 3VM</a></li>
                    <li><a href="/blog/deb11/dns.html">DNS</a></li>
                    <li><a href="/blog/deb11/sftp.html">SFTP</a></li>
                    <li><a href="/blog/deb11/samba.html">Samba</a></li>
                    <li><a href="/blog/deb11/virtualhost.html">VirtualHost</a></li>
                </ul>
                </ul>
            </div>
            <div class="content">
                <h1>Toppologi</h1>
                <img src="img/top-deb11.png" alt="" class="top-deb11">
                <h2>Router</h2>
                <h2 class="h2-wp">Interfaces</h2>
                <p>ens33 NAT : 10.1.1.10/24 <br>
                    ens36 LAN (Server): 20.1.1.1/24 <br>
                    ens37 LAN (Windows): 30.1.1.1/24 <br>
                </p>
                <h2 class="h2-wp">Package</h2>
                <ul>
                    <li>NAT Gateway (New)</li>
                    <li>SSH (New)</li>
                    <li>DHCP Server (New)</li>
                </ul>

                <h2>Server</h2>
                <h2 class="h2-wp">Interfaces</h2>
                <p>
                    ens33 LAN (Server): 20.1.1.20/24
                </p>
                <h2 class="h2-wp">Package</h2>
                <ul>
                    <li>SSH (New)</li>
                </ul>

                <h2>Windows</h2>
                <h2 class="h2-wp">Interfaces</h2>
                <p>
                    LAN (Windows): 30.1.1.30 - 30.1.1.60 (DHCP Server)
                </p>
                <h2 class="h2-wp">Package</h2>
                <ul>
                    <li>Putty</li>
                    <li>Filezilla</li>
                    <li>Web Browser</li>
                    <li>Command Prompt</li>
                </ul>

                <h1>Router</h1>
                <p>Sebelum itu kita harus mengganti IP <strong>Router</strong> sesuai segmen yang telah kita buat. Untuk ubah ip address kita harus menggunakan user root. Jika sudah dalam user root, maka kita ketik command
                </p>

                <div class="daging">
<pre>
nano /etc/network/Interfaces
</pre>
                </div>

                <p>Lalu edit file nya menjadi</p>

                <div class="daging">
<pre>
# The loopback network interface
auto ens33
iface ens33 inet static
    address 10.1.1.10
    netmask 255.255.255.0
    gateway 10.1.1.2
    
auto ens36
iface ens36 inet static
    address 20.1.1.1
    netmask 255.255.255.0
    
auto ens37
iface ens37 inet static
    address 30.1.1.1
    netmask 255.255.255.0
</pre>
                </div>

                <p>Lalu restart seluruh jaringan Debian 11-Router dengan command</p>

                <div class="daging">
<pre>
/etc/init.d/networking restart
</pre>
                </div>

                <h2>Install Package</h2>
                <p>Sebelum itu kita harus update terlebih dahulu. Tujuan dari perintah apt update adalah untuk mengunduh bagi setiap sumber paket, berkas Packages (atau Sources ) yang sesuai dan menghapus versi lama dari paket yang diinstal atau yang dapat ditingkatkan pada sistem yang tidak lagi diperlukan saat melakukan pemutakhiran.</p>

                <div class="daging">
<pre>
apt update && apt upgrade -y
</pre>
                </div>

                <p>Setelah itu kita bisa install package yang akan digunakan</p>

                <div class="daging">
<pre>
apt install net-tools
apt install iptables-persistent
apt install netfilter-persistent
apt install ssh
apt install isc-dhcp-server
</pre>
                </div>

                <h2>Konfigurasi</h2>
                <h2 class="h2-wp">NAT Gateway</h2>
                <p>Kita akan Konfigurasi router agar bisa membagikan IP dan Internet kepada client.</p>

                <div class="daging">
<pre>
nano /etc/sysctl.conf

Mengganti pada baris:
net.ipv4.ip_forward=0
menjadi
net.ipv4.ip_forward=1
</pre>
                </div>
                <br>

                <div class="daging">
<pre>
nano /proc/sys/net/ipv4/ip_forward

ganti
0
menjadi
1
</pre>
                </div>
                <br>

                <div class="daging">
<pre>
iptables -t nat -A POSTROUTING -o ens33 -j MASQUERADE
</pre>
                </div>

                <p>Lalu save konfigurasi iptables dengan cara</p>

                <div class="daging">
<pre>
iptables-save
netfilter-persistent save
</pre>
                </div>

                <h2 class="h2-wp">SSH</h2>
                <p>Fungsi SSH adalah sebagai media transfer data aman dan terpercaya yang bisa digunakan secara remote atau dari jarak jauh. Jika Anda pernah menggunakan aplikasi remote login seperti Telnet sebelumnya, SSH adalah aplikasi pengganti yang lebih aman berkat teknologi secure shellnya.</p>

                <div class="daging">
<pre>
nano /etc/ssh/sshd_config

#LoginGraceTime 2m
PermitRootLogin yes
#StrictModes yes
#MaxAuthTries 6
#MaxSessions 10
</pre>
                </div>

                <p>Restart service SSH agar saat akan melakukan SSH bisa berjalan dengan baik</p>
                
                <div class="daging">
<pre>
/etc/init.d/ssh restart
</pre>
                </div>

                <h2 class="h2-wp">DHCP Server</h2>
                <p>DHCP adalah singkatan dari Dynamic Host Configuration Protocol. DHCP adalah protokol yang digunakan untuk distribusi IP Address pada jaringan komputer secara dinamis. Dengan menggunakan DHCP Anda dapat melakukan konfigurasi IP address pada setiap perangkat di jaringan komputer secara otomatis.</p>

                <div class="daging">
<pre>
nano /etc/dhcp/dhcpd.conf

# A slightly different configuration for an internal subnet.
subnet 30.1.1.0 netmask 255.255.255.0 {
  range 30.1.1.30 30.1.1.60;
  option domain-name-servers ns1.internal.example.org;
  option domain-name "internal.example.org";
  option routers 30.1.1.1;
  option broadcast-address 30.1.1.255;
  default-lease-time 600;
  max-lease-time 7200;
}
</pre>
                </div>

                <p>Selanjutnya kita akan menentukan port mana yang akan kita berikan service DHCP Server ini. Karena saya akan memberi service untuk <strong>Windows</strong>, maka saya akan memakai interfaces ens37 sebagai port yang akan diberikan DHCP Server</p>

                <div class="daging">
<pre>
nano /etc/default/isc-dhcp-server

INTERFACESv4="ens37"
INTERFACESv6=""
</pre>
                </div>

                <p>Restart service agar saat akan melakukan DCHP Server bisa berjalan dengan baik</p>

                <div class="daging">
<pre>
systemctl restart isc-dhcp-server
</pre>
                </div>

                <h1>Server</h1>
                <p>Sebelum itu kita harus mengganti IP <strong>Server</strong> sesuai segmen yang telah kita buat. Untuk ubah ip address kita harus menggunakan user root. Jika sudah dalam user root, maka kita ketik command
                </p>

                <div class="daging">
<pre>
nano /etc/network/Interfaces
</pre>
                </div>

                <p>Lalu edit file nya menjadi</p>

                <div class="daging">
<pre>
# The loopback network interface
auto ens33
iface ens33 inet static
    address 20.1.1.20
    netmask 255.255.255.0
    gateway 20.1.1.1
</pre>
                </div>

                <p>Lalu restart seluruh jaringan Debian 11-Server dengan command</p>

                <div class="daging">
<pre>
/etc/init.d/networking restart
</pre>
                </div>

                <h2>Install Package</h2>
                <p>Sebelum itu kita harus update terlebih dahulu. Tujuan dari perintah apt update adalah untuk mengunduh bagi setiap sumber paket, berkas Packages (atau Sources ) yang sesuai dan menghapus versi lama dari paket yang diinstal atau yang dapat ditingkatkan pada sistem yang tidak lagi diperlukan saat melakukan pemutakhiran.</p>

                <div class="daging">
<pre>
apt update && apt upgrade -y
</pre>
                </div>

                <p>Setelah itu kita bisa install package yang akan digunakan</p>
                <div class="daging">
<pre>
apt install ssh
</pre>
                </div>
                
                <h2 class="h2-wp">Konfigurasi</h2>
                
                <div class="daging">
<pre>
nano /etc/ssh/sshd_config

#LoginGraceTime 2m
PermitRootLogin yes
#StrictModes yes
#MaxAuthTries 6
#MaxSessions 10
</pre>
                </div>

                <p>Restart service SSH agar saat akan melakukan SSH bisa berjalan dengan baik</p>
                
                <div class="daging">
<pre>
/etc/init.d/ssh restart
</pre>
                </div>

                <h1>Windows</h1>
                <p>Untuk windows tidak ada konfigurasi khusus karena sudah mendapatkan DHCP Server dari sisi Router. Kita hanya menambahkan DNS milik google agar bisa terhubung ke internet yang akan digunakan untuk Installasi package yang dibutuhkan. DNS tersebut yaitu <strong>8.8.8.8 dan 8.8.4.4</strong>. Untuk package yang akan digunakan nantinya adalah:</p>
                <ul>
                    <li>Putty</li>
                    <li>Filezilla</li>
                    <li>Web Browser</li>
                    <li>Command Prompt</li>
                </ul>

                <h1>Tambahan</h1>
                <p>Sebagai tambahan kita akan konfigurasi ssh pada sisi <strong>Router</strong> kepada Server. Ssh-keygen adalah alat untuk membuat pasangan kunci otentikasi baru untuk SSH . Pasangan kunci tersebut digunakan untuk mengotomatisasi login, sistem masuk tunggal, dan untuk mengautentikasi host.</p>
                <h2>Server</h2>
                
                <div class="daging">
<pre>
ssh-keygen

(enter semua)
</pre>
                </div>
                <br>

                <div class="daging">
<pre>
ssh-copy-id -i /root/.ssh/id_rsa.pub root@20.1.1.20

yes
(masukkan password root server)
</pre>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="footer">
                <h1>Created By : Rizwan Fairuz Mamduh</h1>
            </div>
        </div>
    </div>
</body>
</html>