<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debian11 | Automation</title>

    <link rel="stylesheet" href="/assets/css/dhcp.css">
    <link rel="icon" href="/assets/img/linux.png">
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="header">
                <div class="judul">
                    <h1>Ansible</h1>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="navigation">
                <h1>Dokumentasi</h1>
            </div>
        </div>
        <div class="row">
            <div class="sidebar">
                <h1>Debian 10</h1>
                <ul>
                    <li><a href="/blog/debian10/">Home Debian</a></li>
                    <li><a href="/blog/debian10/dhcp-server/">Superlab-DHCP Server</a></li>
                    <li><a href="/blog/debian10/ssh/">Superlab-SSH</a></li>
                    <li><a href="/blog/debian10/dns/">Superlab-DNS Server</a></li>
                    <li><a href="/blog/debian10/ftp/">Superlab-FTP Server</a></li>
                    <li><a href="/blog/debian10/apache2/">Superlab-Web Server</a></li>
                    <li><a href="/blog/debian10/wordpress/">Superlab-Wordpress</a></li>
                    <li><a href="/blog/debian10/phpmyadmin/">Superlab-PhpMyAdmin</a></li>
                </ul>
                <h1>Mikrotik</h1>
                <ul>
                    <li><a href="/blog/mikrotik/">Home Mikrotik</a></li>
                    <li><a href="/blog/mikrotik/basic-config/">Basic Config</a></li>
                    <li><a href="/blog/mikrotik/vlan/">VLAN</a></li>
                    <li><a href="/blog/mikrotik/route-static/">Routing Static</a></li>
                    <li><a href="/blog/mikrotik/route-dynamic/">Routing Dynamic</a></li>
                    <li><a href="/blog/mikrotik/hotspot/">Hotspot Login</a></li>
                    <li><a href="/blog/mikrotik/block/">Blok SSH, Telnet, HTTP</a></li>
                    <li><a href="/blog/mikrotik/bandwidth/">Bandwidth</a></li>
                    <li><a href="/blog/mikrotik/load-balancing/">Load Balanding</a></li>
                    <li><a href="/blog/mikrotik/bridge/">Bridge</a></li>
                </ul>
                <h1>AWS Cloud</h1>
                <ul>
                    <li><a href="/blog/aws/">Home Cloud</a></li>
                    <li><a href="/blog/aws/cpanel/">Install cPanel</a></li>
                    <li><a href="/blog/aws/wordpress/">Install Wordpress</a></li>
                    <li><a href="/blog/aws/nginx/">Install NginX</a></li>
                    <li><a href="/blog/aws/zabbix/">Install Zabbix & Database</a></li>
                    <li><a href="/blog/aws/add-host-for-zabbix/">Add Host For Monitoring</a></li>
                    <li><a href="/blog/aws/vpc/">Virtual Private Network</a></li>
                    <li><a href="/blog/aws/webstatic/">Website Static</a></li>
                    <li><a href="/blog/aws/nagios/">Install Nagios</a></li>
                    <li><a href="/blog/aws/nagios-for-webserver/">Nagios at WebServer</a></li>
                    <li><a href="/blog/aws/nagios-for-database/">Nagios at Database</a></li>
                </ul>
                <h1>Security</h1>
                <ul>
                    <li><a href="/blog/security/">Home Security</a></li>
                    <li><a href="/blog/security/installation/">Installasi</a></li>
                    <li><a href="/blog/security/iptables/">IP Tables</a></li>
                    <li><a href="/blog/security/cracklib/">Craklib</a></li>
                    <li><a href="/blog/security/port/">Port Forwarding</a></li>
                    <li><a href="/blog/security/mitm-and-ddos/">MITM&DDOS</a></li>
                    <li><a href="/blog/security/snort/">Snort</a></li>
                    <li><a href="/blog/security/otp/">Generated OTP</a></li>
                </ul>
                <h1>Debian 11</h1>
                <ul>
                    <li><a href="/blog/debian11/">Home Debian11</a></li>
                    <li><a href="/blog/debian11/installation/">Install 3VM</a></li>
                    <li><a href="/blog/debian11/dns/">DNS</a></li>
                    <li><a href="/blog/debian11/sftp/">SFTP</a></li>
                    <li><a href="/blog/debian11/samba/">Samba</a></li>
                    <li><a href="/blog/debian11/virtualhost/">VirtualHost</a></li>
                    <li><a href="/blog/debian11/myweb/">MyWeb</a></li>
                    <li><a href="/blog/debian11/static/">Static</a></li>
                    <li><a href="/blog/debian11/dvwa/">DVWA</a></li>
                    <li><a href="/blog/debian11/ansible/">Automation</a></li>
                </ul>
            </div>
            <div class="content">
                <div class="text" style="margin-inline: 20px;">
                <h1>Toppologi</h1>
                <img src="/blog/debian11/img/top-ansible.jpg" alt="" class="top-ansible">
                <h1>Penjelasan</h1>
                <p>Ansible adalah sebuah alat open-source untuk pengaturan perangkat lunak, pengelolaan konfigurasi, dan penerapan aplikasi. Ini dapat otomatisasi proses konfigurasi dan pengelolaan server, serta penerapan dan pembaruan aplikasi. Ansible menggunakan bahasa sederhana yang mudah dibaca oleh manusia yang disebut YAML untuk menjelaskan tugas, dan dapat bekerja dengan beragam sistem dan teknologi. Ini populer digunakan dalam operasi TI, penyediaan awan, dan pengembangan perangkat lunak. <br> <br>
                Fungsi utama dari Ansible adalah untuk otomatisasi proses pengelolaan konfigurasi dan penerapan aplikasi. Ini memungkinkan Anda untuk mendefinisikan dan mengelola konfigurasi server dan aplikasi dalam bahasa yang sederhana dan mudah dibaca oleh manusia yang disebut YAML. Ansible menggunakan informasi konfigurasi ini untuk memastikan bahwa semua server dalam jaringan dikonfigurasi dalam cara yang konsisten dan dapat diprediksi, dan juga dapat otomatisasi proses penerapan dan pembaruan aplikasi.</p>
                <h1>Fungsi</h1>
                <ol>
                    <li>Pengelolaan konfigurasi otomatis: Ansible dapat membantu memastikan bahwa semua server dalam jaringan dikonfigurasi dalam cara yang konsisten dan dapat diprediksi, mengurangi risiko kesalahan dan downtime.</li>
                    <li>Penerapan aplikasi: Ansible dapat otomatisasi proses penerapan dan pembaruan aplikasi, memudahkan untuk menyebarluaskan fitur dan perbaikan bug baru.</li>
                    <li>Penyediaan otomatis: Ansible dapat digunakan untuk penyediaan server dan infrastruktur baru, seperti mesin virtual atau contoh awan, dalam cara yang dapat diulang dan konsisten.</li>
                    <li>Eksekusi perintah ad-hoc: Ansible memungkinkan untuk mengeksekusi perintah pada beberapa sistem sekaligus, memudahkan untuk melakukan tugas seperti memulai atau menghentikan layanan, atau memeriksa status sistem.</li>
                    <li>Orkestrasi multi-node: Ansible memungkinkan untuk mengorkestrasi tugas pada beberapa node, juga dapat menangani jumlah sistem yang besar sekaligus, cocok untuk implementasi skala besar.</li>
                    <li>Tanpa agen: Ansible tidak memerlukan agen apa pun yang diinstal pada mesin target, menggunakan SSH atau WinRM untuk berkomunikasi dengan mesin target, yang membuatnya ringan dan mudah diatur.</li>
                </ol>
                <h1>Syarat</h1>
                <p>Untuk mengikuti panduan ini, kamu harus menyiapkan hal berikut :</p>
                <ol>
                    <li>Membuat user dengan privileges sudo di setiap user.</li>
                    <li>Sudah menginstall ssh di semua nodes</li>
                </ol>
                <h2>Install Sudo</h2>
                <p>sudo merupakan sebuah perintah dalam command-line Linux. Apabila anda memiliki akses root, maka sudo akan melakukan perintah sebagai superuser. Pengguna sudo dan perintah-perintah yang dapat mereka pergunakan terdapat pada file konfigurasi /etc/sudoers</p>
                <h2 class="h2-wp">Router, Node1, Node2</h2>
                <p>Install package sudo untuk semua machine</p>
                <div class="daging">
<pre>
apt install sudo
</pre>
                </div>
                <h2 class="h2-wp">Menambahkan User</h2>
                <div class="daging">
<pre>
adduser rizwan29
</pre>
                </div>
                <h2 class="h2-wp">Tambah ke Grup Sudo</h2>
                <div class="daging">
<pre>
usermod -aG sudo rizwan29
</pre>
                </div>
                <h2 class="h2-wp">Switch User</h2>
                <p>Kali ini kita selalu menggunakan user 'rizwan29' yang telah mendapatkan izin dari group sudo</p>
                <div class="daging">
<pre>
su rizwan29
</pre>
                </div>

                <h2>Install ssh</h2>
                <h2 class="h2-wp">Router, Node1, Node2</h2>
                <p>Install package ssh untuk semua machine</p>
                <div class="daging">
<pre>
apt install ssh
</pre>
                </div>
                <h2 class="h2-wp">SSH Keygen (Router)</h2>
                <p>Ssh-keygen berfungsi untuk menghasilkan  private key dan public key yang akan digunakan untuk authentikasi ketika terjadi komunikasi antara dua host. Fungsi ssh-keygen sangat dibutuhkan oleh system admin ketika mengakses server, dengan ssh-keygen maka system admin tidak perlu repot-report mengetikkan password lagi.</p>
                <div class="daging">
<pre>
ssh-keygen -t rsa
ssh-copy-id -i /home/rizwan29/.ssh/id_rsa rizwan29@20.1.1.1
ssh-copy-id -i /home/rizwan29/.ssh/id_rsa rizwan29@20.1.1.20
ssh-copy-id -i /home/rizwan29/.ssh/id_rsa rizwan29@20.1.1.30
</pre>
                </div>
                <h2>Install Ansible</h2>
                <h2 class="h2-wp">Konfigurasi Router</h2>
                <div class="daging">
<pre>
sudo apt install ansible sshpass curl -y
</pre>
                </div>
                <h2 class="h2-wp">Buat File Host Inventory</h2>
                <p>Setelah melakukan instalasi Ansible di Control node, file /etc/hosts akan dibuat secara otomatis. Pada file ini kita bisa menambahkan managed nodes / node-node yang akan di konfigurasi. Kita juga bisa membuat file inventory sendiri di direktori home.</p>
                <div class="daging">
<pre>
sudo nano ~/.hosts
</pre>
                </div>
                <p>tambakan script berikut</p>
                <div class="daging">
<pre>
[node1]
20.1.1.20 ansible_ssh_pass=123 ansible_ssh_user=rizwan29
    
[node2]
20.1.1.30 ansible_ssh_pass=123 ansible_ssh_user=rizwan29
</pre>
                </div>
                <h2 class="h2-wp">Cek Koneksi</h2>
                <div class="daging">
<pre>
sudo ansible -i ~/.hosts -m ping all
</pre>
                </div>
                <p>Setelah request ping dikirimkan ke remote host, modul akan mengembalikan value yang menandakan apakah ping berhasil berjalan. Secara default, ping modul akan mengembalikan string "pong" jika suskes, dan sebuah excpetion (penolakan) beserta pesan error (msg) jika gagal.</p>
                <p>Setelah melakukan test ping pada managed noded, kita akan lakukan uji-coba apakah managed nodes sudah bisa menerima perintah dari control node dengan melakukan cek memory yang tersedia di managed nodes.</p>
                <h2 class="h2-wp">Cek Koneksi</h2>
                <div class="daging">
<pre>
sudo ansible -i ~/.hosts -m shell -a "free -m" all
</pre>
                </div>
                <h2 class="h2-wp">Cek IP Address Node</h2>
                <div class="daging">
<pre>
sudo ansible -i ~/.hosts -m shell -a "ip address" node1
sudo ansible -i ~/.hosts -m shell -a "ip address" node2
</pre>
                </div>
                <h2 class="h2-wp">Install Aplikasi</h2>
                <p>Pada tutorial ini, kita akan melakukan instalasi di managed nodes menggunakan file Playbook. Kita akan install Web Server Apache2, dan melakukan cek system-uptime (waktu server menyala) di node 2. Untuk itu kita buat file Playbood di Controller(Router).</p>
                <div class="daging">
<pre>
sudo nano playbook.yaml
</pre>
                </div>
                <p>Pada file YAML tambahkan informasi berikut</p>
                <div class="daging">
<pre>
---
- hosts: node2
    become: yes
    tasks:
    - name: Install web server apache2 terbaru di Debian 11 node
        apt: name=apache2 state=latest
    - name: Start service apache2
        service:
            name: apache2
            state: started

    - name: Cek uptime dari remote host
        shell: uptime
        register: command_output

    - debug:

                var: command_output.stdout_lines
</pre>
                </div>
                <h2 class="h2-wp">Jalankan Script</h2>
                <p>Sekarang eksekusi / jalankan playbook file menggunakan perintah berikut.</p>
                <div class="daging">
<pre>
sudo ansible-playbook -i ~/.hosts playbook.yaml -K
</pre>
                </div>
                <h2 class="h2-wp">Cek Status Apache2 (Node2)</h2>
                <div class="daging">
<pre>
sudo ansible -i ~/.hosts -m shell -a "systemctl status apache2" node2
</pre>
                </div>
                <h2 class="h2-wp">Cek HTPP (Node2)</h2>
                <div class="daging">
<pre>
curl http://20.1.1.30
</pre>
                </div>
            </div>
            </div>
        </div>
        <div class="row">
            <div class="footer">
                <h1>Created By : Rizwan Fairuz Mamduh</h1>
            </div>
        </div>
    </div>
</body>
</html>